# Nigraan Visualization Guide

This document explains the various visualization charts in the Nigraan Antivirus analysis dashboard and how to interpret them.

## 1. Analysis Circles

The three main circles displayed on the analysis dashboard represent:

### Initial Prediction Score

- **What it shows**: The raw output from the combined ML models before any rectification
- **Interpretation**: 
  - Higher values (>50%) suggest malicious content
  - Lower values (<50%) suggest benign content
- **Technical details**: This score is generated by the `joined_prediction()` function which combines outputs from the CNN, RNN, and N-gram models

### Rectification Value

- **What it shows**: The adjustment value calculated to reduce false positives
- **Interpretation**:
  - Positive values increase the malware probability
  - Negative values decrease the malware probability
  - Larger absolute values indicate higher confidence in the rectification
- **Technical details**: Generated by the `rectification()` function, which performs additional analysis on borderline cases

### Final Verdict

- **What it shows**: The final malware probability after applying rectification
- **Interpretation**:
  - Values over 50% classify the file as malicious
  - Values under 50% classify the file as benign
  - The further from 50%, the higher the confidence
- **Technical details**: Calculated as `initial_prediction + rectification_value`

## 2. N-Grams Distribution Chart

This line chart visualizes the frequency distribution of byte sequences (4-grams).

### Components

- **Red line**: Typical distribution in benign files
- **Orange line**: Typical distribution in malware files
- **Blue line**: Distribution in the currently analyzed file

### How to Read This Chart

- The X-axis represents different byte patterns (shown by month labels as placeholders)
- The Y-axis shows the relative frequency of these patterns
- **Pattern matching**: If the blue line follows the orange line pattern, the file likely contains byte sequences common in malware
- **Anomalies**: Sharp spikes or valleys in the blue line that don't match either reference line may indicate unusual code
- **Overall trend**: The general shape of the blue line relative to the reference lines is more important than individual points

### Technical Implementation

The frequency data is extracted by the `grams_extractor()` function, which:
1. Reads the file in 4-byte chunks
2. Tracks the frequency of each unique 4-byte sequence
3. Normalizes the frequencies to create a distribution
4. Selects the most significant patterns for visualization

## 3. Features Detail Section

This tabbed section provides deeper insight into specific aspects of the file.

### 4-grams Tab

- **What it shows**: Detailed frequency data for specific byte patterns
- **Interpretation**: Unusual patterns or frequencies may indicate malicious code
- **Technical details**: Displays the raw data used to generate the N-grams distribution chart

### DLLs Tab

- **What it shows**: Libraries and API functions imported by the executable
- **Interpretation**: 
  - Look for suspicious combinations (e.g., process manipulation + network access)
  - Pay attention to uncommon DLLs or functions with known malicious applications
- **Technical details**: Extracted from the PE file's import table using the `imports_json()` function

### Images Tab

- **What it shows**: Visual representation of the file's binary content
- **Interpretation**:
  - Different file types have characteristic visual patterns
  - Encrypted/compressed sections appear as random noise
  - Malware families often have recognizable visual signatures
- **Technical details**: Created by converting bytes to grayscale pixel values using the `extract_img()` function

### Sequence Tab

- **What it shows**: Analysis of assembly instruction sequences
- **Interpretation**:
  - Unusual instruction patterns may indicate obfuscation or malicious behavior
  - Look for excessive use of specific instruction types associated with anti-analysis
- **Technical details**: Generated by disassembling the code section using the `extract_sequence()` function

## Implementation Notes for Developers

1. The visualization data is populated in the `get_scan_results()` function in `results.js`
2. Chart tooltips and explanations are defined in the same function
3. Chart configurations (colors, scales, etc.) are defined in the Chart.js initialization
4. To update or modify the charts:
   - Edit the Chart.js configuration in `demo.js`
   - Modify the data processing in `results.js`
   - Update the explanation text in the success callback of `get_scan_results()`

## Customizing the Visualizations

To add new visualization types or modify existing ones:

1. Add appropriate HTML elements in the template
2. Configure the chart in JavaScript using Chart.js
3. Update the data structure in `get_scan_results()`
4. Add explanatory text for the new visualization
